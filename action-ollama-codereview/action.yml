name: "Ollama Code Review"
description: "Revisa código con un modelo Ollama y genera reporte web + JSON"
author: "tu-usuario"
inputs:
  model:
    description: "Nombre del modelo Ollama (ej: llama3.1, qwen2.5-coder:7b)"
    required: true
    default: "qwen2.5-coder:7b"
  server_url:
    description: "URL del servidor Ollama (http://localhost:11434)"
    required: true
    default: "http://localhost:11434"
  file_glob:
    description: "Glob de archivos a revisar (fallback)"
    required: true
    default: "**/*"
  exclude_glob:
    description: "Glob de exclusión"
    required: false
    default: "node_modules/**"
  file_list:
    description: "Lista de archivos (multilínea). Prioridad sobre file_glob."
    required: false
    default: ""
  file_list_path:
    description: "Ruta a archivo con paths (uno por línea). Máxima prioridad."
    required: false
    default: ""
  fail_on_critica:
    description: "Falla el job si hay issues CRÍTICA"
    required: false
    default: "true"
  retention_days:
    description: "Días de retención del artefacto"
    required: false
    default: "7"
  # 🔧 NUEVO: resiliencia y control
  request_timeout_ms:
    description: "Timeout por archivo en ms (anti fetch failed)"
    required: false
    default: "300000" # 5 minutos
  max_bytes_per_file:
    description: "Máximo de bytes a enviar por archivo (se trunca)"
    required: false
    default: "307200" # 300 KB
  ollama_num_predict:
    description: "Límite de tokens de salida (num_predict)"
    required: false
    default: "512"
  ollama_num_ctx:
    description: "Contexto máximo de tokens (num_ctx)"
    required: false
    default: "2048"
  ollama_temperature:
    description: "Temperatura de muestreo"
    required: false
    default: "0"
runs:
  using: "node20"
  main: "dist/index.js"
branding:
  color: "blue"
  icon: "shield"
